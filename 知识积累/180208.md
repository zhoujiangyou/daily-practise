---
title: session以及jwt相关总结
date: 2018-2-8 14:58:02
tags: 杂谈
---

#### session  
session 与cookie的目的相同，都是为了克服http协议无状态的缺陷。session通过cookie在客户端保存sessionid，
而将用户的其他回话消息保存在服务器的session的对象中。cooike需要将所有信息都保存在客户端。其实这样做会面临csrf以及xss。所以安全性
上面会有一定问题。
在使用cookie时，在多个域名下面，会存在跨域问题。而且在多个服务器是，如何共享session也是一个问题。

#### JWT
相比于session，jwt不存在跨域问题，服务端所占用资源不多，也不存在session共享的问题。但是还是有一些问题。  
1. 登录状态信息续签问题。比如设置一个有效期为一个小时，那么在一个小时候，如果用户依然在这个微博应用上面，这个时候当然不能指望用户在登录一次
。一种解决方案是用户每次发送请求的时候都返回一个新的token，但是这样就是很频繁的生成token，另一种方案就是判断还有多久这个token'会
过期，在快要过期之前返回一个新的token。  
2. 用户主动注销。jwt并不支持用户主动退出登录，当然可以在客户端删除这个token，别的客户端在请求时，如果发现token失效，就可以再次请求。

---

#### csrf攻击与防御 
csrf：跨站点请求伪造，攻击者利用你的身份还有你的名义去发送一段恶意请求，利用你的账户去进行一些恶意操作。
