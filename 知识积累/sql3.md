---
title: 数据库事物的四种隔离级别
date: 2018-1-2 09:46:02
tags: sql
---
#### 数据库事务的四种隔离级别  
1. Read Uncommitted  
读未提交，顾名思义。就是一个事务可以读取另一个未提交事务的数据。  
>示例：老板要给程序员发工资，程序员的工资是3.6w一个月。但是发工资时，老板不小心按错了数字，变成3.9w一个月。该钱已经打到程序员的户口，但是事务还没有提交。  
就在这个时候，程序员去查看自己这个月的工资，发现比以往多了三千元。以为是涨工资了非常开心。但是老板及时发现了不对，马上回滚差点提交了的事务，将数字改成了3.6w再提交。  

实际这个程序员这个月工资还是3.6，但是看到的确是3.9.他看到的就是老板还没有提交的数据。这就是脏读。
2. Read Committed
读提交，就是一个事务要等另一个事务提交后才能读取数据。  
> 示例：程序员拿到卡去进行消费，卡里有3.6w。当他买单的时候（程序员事务开启），收费系统事先检测到他的卡里有3.6w。就在这个时候程序员妻子要将钱全部转出充当家用，并提交。当收费系统准备扣款的时候，在检测卡里金额，发现已经没钱了。（第二次检测金额当然要等妻子转出金额事务提交完）。

这就是读提交，若有事务对数据进行跟新操作时，读操作事务要等待这个更新操作事务提交后才能读取数据。可以解决脏读问题。但是在一个事务范围内像个相同的查询却反悔了不同的数据，这就是不可重复读。
3. Repeatable Read  
重复读，就是在读取数据（事务开启）时，不再允许修改操作。  
> 示例：程序员拿着卡去享受生活，卡里余额3.6 当他买单的时候（事务开启，不允许其他事物的update操作），收费系统事先检测到他卡里有3.6w。这个时候他的妻子就不能转出金额了。接下来收费系统可以扣款了。

重复读可以解决不可重复读问题。不可重复读对应的士修改，即update操作。但是还是可能会有幻读问题。因为幻读对应的士插入insrert操作，而不是update操作。

4. Serializable  序列化  
序列化是最高的事务隔离级别，在该级别下面，事务串行化顺序执行。可以避免脏读、不可重复读、与幻读。但是这种事务隔离级别效率低下，比较耗数据库性能。一般不使用。
